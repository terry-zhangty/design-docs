<mxGraphModel>
  <root>
    <mxCell id="0"/>
    <mxCell id="1" parent="0"/>

    <!-- Title -->
    <mxCell id="t2" value="&lt;b style=&quot;font-size:16px&quot;&gt;Phase 2: Interactive REPL&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontColor=#a78bfa;" vertex="1" parent="1">
      <mxGeometry x="80" y="10" width="400" height="35" as="geometry"/>
    </mxCell>

    <!-- REPL Binary: full width -->
    <mxCell id="cli2" value="&lt;b style=&quot;font-size:14px&quot;&gt;interactive_mock_control_cli&lt;/b&gt;&lt;br&gt;&lt;span style=&quot;font-size:11px;color:#94a3b8&quot;&gt;REPL: mode, start, stop, status — Live status display&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1e293b;strokeColor=#a78bfa;strokeWidth=2;fontColor=#e2e8f0;arcSize=8;" vertex="1" parent="1">
      <mxGeometry x="50" y="55" width="460" height="70" as="geometry"/>
    </mxCell>

    <!-- Arrow: CLI -> Core (aligned at x=155) -->
    <mxCell id="e2a" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#64748b;strokeWidth=2;endArrow=classic;endFill=1;labelBackgroundColor=none;" edge="1" parent="1" source="cli2" target="core2">
      <mxGeometry relative="1" as="geometry">
        <Array as="points">
          <mxPoint x="155" y="135"/>
          <mxPoint x="155" y="200"/>
        </Array>
      </mxGeometry>
    </mxCell>
    <mxCell id="e2a_l" value="&lt;span style=&quot;font-size:13px;color:#94a3b8&quot;&gt;calls&lt;/span&gt;" style="edgeLabel;html=1;align=right;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=none;" vertex="1" connectable="0" parent="e2a">
      <mxGeometry relative="1" as="geometry"><mxPoint x="-8" as="offset"/></mxGeometry>
    </mxCell>

    <!-- Shared Core: narrow, left-aligned -->
    <mxCell id="core2" value="&lt;b style=&quot;font-size:13px&quot;&gt;MockControlSender&lt;/b&gt;&lt;br&gt;&lt;span style=&quot;font-size:11px;color:#94a3b8&quot;&gt;Same shared core (from Phase 1)&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1e293b;strokeColor=#4ade80;strokeWidth=2;fontColor=#e2e8f0;arcSize=8;" vertex="1" parent="1">
      <mxGeometry x="50" y="210" width="260" height="65" as="geometry"/>
    </mxCell>

    <!-- Arrow: Core -> Trigger Topic (aligned at x=155) -->
    <mxCell id="e2b" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#4ade80;strokeWidth=2;endArrow=classic;endFill=1;labelBackgroundColor=none;" edge="1" parent="1" source="core2" target="trig">
      <mxGeometry relative="1" as="geometry">
        <Array as="points">
          <mxPoint x="155" y="285"/>
          <mxPoint x="155" y="360"/>
        </Array>
      </mxGeometry>
    </mxCell>
    <mxCell id="e2b_l" value="&lt;span style=&quot;font-size:13px;color:#4ade80&quot;&gt;publish&lt;/span&gt;" style="edgeLabel;html=1;align=right;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=none;" vertex="1" connectable="0" parent="e2b">
      <mxGeometry relative="1" as="geometry"><mxPoint x="-8" as="offset"/></mxGeometry>
    </mxCell>

    <!-- Trigger Topic -->
    <mxCell id="trig" value="&lt;b style=&quot;font-size:12px&quot;&gt;mock_control_trigger&lt;/b&gt;&lt;br&gt;&lt;span style=&quot;font-size:10px;color:#94a3b8&quot;&gt;AOS / DDS Topic&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#162032;strokeColor=#475569;strokeWidth=1;fontColor=#e2e8f0;" vertex="1" parent="1">
      <mxGeometry x="50" y="370" width="210" height="50" as="geometry"/>
    </mxCell>

    <!-- Status Topic -->
    <mxCell id="stat" value="&lt;b style=&quot;font-size:12px&quot;&gt;mock_control_status&lt;/b&gt;&lt;br&gt;&lt;span style=&quot;font-size:10px;color:#94a3b8&quot;&gt;AOS / DDS Topic&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#162032;strokeColor=#a78bfa;strokeWidth=1;fontColor=#e2e8f0;" vertex="1" parent="1">
      <mxGeometry x="300" y="370" width="210" height="50" as="geometry"/>
    </mxCell>

    <!-- Arrow: Trigger Topic -> Component (aligned at x=155) -->
    <mxCell id="e2c" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#fbbf24;strokeWidth=2;endArrow=classic;endFill=1;labelBackgroundColor=none;" edge="1" parent="1" source="trig" target="mc2">
      <mxGeometry relative="1" as="geometry">
        <Array as="points">
          <mxPoint x="155" y="430"/>
          <mxPoint x="155" y="510"/>
        </Array>
      </mxGeometry>
    </mxCell>
    <mxCell id="e2c_l" value="&lt;span style=&quot;font-size:13px;color:#fbbf24&quot;&gt;subscribe&lt;/span&gt;" style="edgeLabel;html=1;align=right;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=none;" vertex="1" connectable="0" parent="e2c">
      <mxGeometry relative="1" as="geometry"><mxPoint x="-8" as="offset"/></mxGeometry>
    </mxCell>

    <!-- MockControl Component: full width -->
    <mxCell id="mc2" value="&lt;b style=&quot;font-size:13px&quot;&gt;MockControl Component&lt;/b&gt;&lt;br&gt;&lt;span style=&quot;font-size:11px;color:#94a3b8&quot;&gt;Running in onboard_main&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1e293b;strokeColor=#fbbf24;strokeWidth=2;fontColor=#e2e8f0;arcSize=8;" vertex="1" parent="1">
      <mxGeometry x="50" y="520" width="460" height="55" as="geometry"/>
    </mxCell>

    <!-- Arrow: Component -> Status Topic (publishes) — straight vertical at x=405 -->
    <mxCell id="e2d" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#fbbf24;strokeWidth=2;endArrow=classic;endFill=1;labelBackgroundColor=none;exitX=0.77;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="mc2" target="stat">
      <mxGeometry relative="1" as="geometry">
        <Array as="points">
          <mxPoint x="405" y="500"/>
          <mxPoint x="405" y="430"/>
        </Array>
      </mxGeometry>
    </mxCell>
    <mxCell id="e2d_l" value="&lt;span style=&quot;font-size:12px;color:#fbbf24&quot;&gt;publishes&lt;/span&gt;" style="edgeLabel;html=1;align=left;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=none;" vertex="1" connectable="0" parent="e2d">
      <mxGeometry relative="1" as="geometry"><mxPoint x="8" as="offset"/></mxGeometry>
    </mxCell>

    <!-- Arrow: Status Topic -> CLI bottom (display feedback) — straight vertical at x=405, then jog left -->
    <mxCell id="e2e" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#a78bfa;strokeWidth=2;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.77;entryY=1;entryDx=0;entryDy=0;endArrow=classic;endFill=1;labelBackgroundColor=none;" edge="1" parent="1" source="stat" target="cli2">
      <mxGeometry relative="1" as="geometry">
        <Array as="points">
          <mxPoint x="405" y="140"/>
          <mxPoint x="404" y="140"/>
        </Array>
      </mxGeometry>
    </mxCell>
    <mxCell id="e2e_l" value="&lt;span style=&quot;font-size:13px;color:#a78bfa&quot;&gt;display&lt;/span&gt;" style="edgeLabel;html=1;align=left;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=none;" vertex="1" connectable="0" parent="e2e">
      <mxGeometry relative="1" as="geometry"><mxPoint x="8" as="offset"/></mxGeometry>
    </mxCell>

    <!-- Legend -->
    <mxCell id="legend2" value="&lt;span style=&quot;font-size:11px;color:#94a3b8&quot;&gt;&lt;b&gt;Legend:&lt;/b&gt;  &lt;span style=&quot;color:#a78bfa&quot;&gt;Purple&lt;/span&gt; = Phase 2  |  &lt;span style=&quot;color:#4ade80&quot;&gt;Green&lt;/span&gt; = Shared core  |  &lt;span style=&quot;color:#fbbf24&quot;&gt;Amber&lt;/span&gt; = onboard_main  |  Sharp box = Topic&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;" vertex="1" parent="1">
      <mxGeometry x="30" y="600" width="545" height="25" as="geometry"/>
    </mxCell>
  </root>
</mxGraphModel>
